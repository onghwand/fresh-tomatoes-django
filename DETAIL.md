# :date: 개발 과정

## 1. :open_file_folder: Files

- [API URL](./files/API.xlsx)
- [발표 PPT](./files/eurachacha.pptx)
- [질문 리스트](./files/질문List.md)
- [추천 로직 후보](./files/추천로직후보.md)
- [ERD](https://lucid.app/lucidchart/389973c1-480e-4350-9fbd-2a5bc768b6b7/edit?invitationId=inv_f3bcf062-9fed-4749-826d-77c058f042b1&page=0_0#)



## 2. :notebook_with_decorative_cover: 간단 개발 일지

- 2022/05/20/금
  - 도현
    - 오늘 최종 프로젝트 명세서를 받았는데, 사이트 게시판이 필요하다고 나와있었고, 이를 위해 원래 계획을 틀었다. 게시글과 댓글을 위한 view, component의 뼈대를 만들어 놓았다.
    - figma를 이용해 동환과 함께 각 화면들의 스키마나 컨셉을 잡아보려 했으나 figma 사용법이 무척 어려웠고, 바로 사용하기엔 무리가 있었다. 그래서 메인페이지의 컨셉 정도만 간신히 만들었다.
  - 동환
    - 오늘 figma 이용해서 제대로 설계해보려고 했는데 결국 헤메다가 끝났다. figma 사용법을 익혀 쓰기엔 시간이 부족하다고 판단해서 과감히 접고 UFC, 군대 얘기를 하다 끝났다. 그래도 git 사용법에 대한 합의는 봐서 다행이다.



- 2022/05/22/일
  - 도현
    - git repository 문제를 해결하려고 이것저것 해보다가(local을 지우고 clone 받아본 게 결정적…) 금요일부터 작성한 코드가 날라갔다. 다시 새로운 마음으로 작성했다.
    - 작은 따옴표 대신 큰 따옴표로 통일하기로 style convention을 짰는데, router-link태그의 :to=”{ name: ‘home’ }” 안의 name을 지정하는 것처럼 어쩔 수 없는 경우엔 작은 따옴표를 이용해야 했다.
    - Navigation Guard를 주석화 하지 않으면 페이지 에러가 계속 발생했다. 일단 주석 처리하고 페이지를 사용했으며, Navigations Guard는 내일 고쳐봐야 할 것 같다.
    - profile관련 내용들 또한 주석화 하지 않으면 username을 찾을 수 없다고 에러가 발생했는데, 이 역시 내일 고쳐야 할 것 같다.
    - 위의 두 에러와 영화 추천 로직을 제외하면 완전 기본적인 기능들 구현은 끝난 것 같다. 코드가 날라간 것 치고 최대한 빨리 짜봤지만, CSS와 추가 기능도 구현하려면 훨씬 시간이 많이 들기에 서둘러야 할 것 같다.
  - 동환
    - API 거의 다 했다. 현재 상영중인 영화 API 구현을 위해, 약5000개 영화데이터가 이미 있는 상태에서 상영중인 영화를 API로 받아온 뒤, Movie Table에 추가하고 now_playing 속성에 True를 달아주었다. 매번 갱신을 해줘야 하므로 Table에 있는 모든 영화의 now_playing을 False로 초기화 한뒤, now_playing에 들어오는 영화만 True로 갱신해주는 과정에서 시간이 좀 걸리는 것 같다.
    - 교집합 추천 API : 추천을 원하는 유저와 교집합이 가장 많은 유저의 좋아하는 영화목록중 교집합을 제외한 영화를 추천해주는 API이다. A: {’해리포터’ , ‘괴물’}, B: {’해리포터’, ‘괴물’, ‘범죄도시’}이고 A가 추천을 원한다면 ‘범죄도시’를 추천해준다. 하지만 A와 B가 완벽하게 일치한다면 일치하는 영화 개수를 줄이며 다시 반복한다. 마지막까지 없으면 빈 리스트를 반환한다.
    - 혼자 요청 제대로 가는지 테스트 해본다고 vue를 만들어서 하고 git에는 올리면 안되니까 gitignore에 vue를 추가해놨었는데 도현이한테 말을 안해서.. 결국에는 도현이 코드가 좀 날라갔다. 개미안하다 진짜 결국 repo 따로 파서 하기로 했다 하ㅠ
    - 내일 할일: AWS 배포하기, 스무고개 추천 구현, ERD 수정



- 2022/05/23/월
  - 도현
    - profile 문제, navigation guard 문제 해결
    - home 영화 표시 / movie detail 내용 표시 및 좋아요, 리뷰, 리뷰 좋아요 완성
    - 생각보다 vue의 오류를 디버깅 하기가 쉽지 않았다. 발생한 여러 오류 중 7할이 오타였는데, 파일이 다양해서 생각보다 잘 안 보인다.
    - article에서 비동기에 의한(?) undefined username 오류는 아직 해결하지 못했다.
  - 동환
    - aws 문제 1: static 경로에 문제가 있어서 style 파일을 못찾고 적용이 안된다.
      - https://dh96s.link/static/rest_framework/css/bootstrap.min.css net::ERR_ABORTED 404 (Not Found)
    - aws 문제 2: 갑자기 접속이 안되는데 이유를 모르겠다.
    - 내일: now_playing 비효율 발생 , table 구조 관리 질문, aws 배포 문제 질문하기 , recommendation 마무리 하고 styling 시작



- 2022/05/24/화
  - 도현
    - 약 5개의 질문을 통해 장르, 런타임, 개봉년도 (+ 관람객수, 예산) 을 추려 DB에 요청을 해야한다. 매번 동일한 질문을 반복한다는 느낌을 최대한 줄이기 위해 같은 목적의 질문도 여러개 만들어서 랜덤으로 보낼 생각이다. 질문에 대한 답변을 받고, 답변을 해석해서 백에 요청을 보내야 한다. graphQL을 사용하는게 좋아 보였는데, 결국은 시간이 부족하기에 잘 모르는 것을 익히는데 이를 낭비할 수 없다고 판단했다.
    - 위 내용을 바탕으로 recommendations 로직을 js로 짜보려 했는데, 잘 모르겠다.. 이 부분만 완성한다면 기능 구현은 끝인데, 생각보다 쉽지 않아서 내일 파이썬으로 django 에서 짜봐야겠다.
    - Home 페이지의 CSS 작성을 시작했다. 처음에 bootstrap없이 navbar를 작성하려 했는데, 이 역시 쉽지 않았다. 반응형은 bootstrap으로 구현하는게 좋은 것 같아 bootstarp을 이용했는데, 이를 사용하니 다른 style 적용이 안 먹는 것들이 있었다. 기본 CSS를 잘 다루는 것이 무척 중요하다고 느껴지는 하루였다.
  - 동환
    - now_playing을 db에 넣고 다시 꺼내는 과정에서 33.5초정도가 걸렸다. 전체 영화의 now_playing = False로 초기화하는데 7.5초, now_playing 20개 영화를 받아 최초로 db에 넣는데 26초가 걸린다. 바보같이 모든 영화를 돌면서 False로 초기화하던걸 True인 영화들만 filter해서 False로 바꾸니 0.24초로 줄었고 이미 들어와 있는 now_playing을 다시 요청할때는 1.35초로 줄어있었다. ⇒ 최초로 20개를 받아오면 시간이 걸리는건 어쩔수 없다. db에 넣는데 하나당 1초 정도 걸림, 하지만 그 이후에 이미 db에 있는 now_playing 가져오는건 1개당 0.05초이다.
      - 변경전: 최초 - 33.5초, 재요청 - 8초 ⇒ 변경후 최초- 27초, 재요청 - 1.5초



- 2022/05/25/수
  - 도현
    - 아침에 스무고개 recommendation logic 에 있던 오류를 고쳤다. django에서 post를 받을 때, data를 response.data로 받아야 했는데 response.post로 잘못 생각했다.
    - 오후 시간대에 동환이가 CSS에서 매우 많은 것을 했기 때문에, 집중이 더 잘되는 저녁 이후 시간대에는 나도 이것저것 만들려 노력했다. 게시판, 댓글, 리뷰 에서 양식이 같아 보이도록 CSS를 작성하고, signup page, not fount 404, account error page를 꾸미고, 한 영화에는 하나의 리뷰만 달 수 있는 기능도 넣었다. 이 외 자잘한 것들은 잘 기억이 안난다..
    - movie detail에서 backdrop path 이미지를 이용해 꾸며보려 했는데, 뭔가 잘못 건드렸는지, movie detail 페이지만 가면 current user가 지워진다. ㅠ
  - 동환
    - 



- 2022/05/24/목
  - 도현
    - 영화 추천 완성도 향상(로딩 문구, 뒤로가기 버튼, 최적화)
    - 영문 및 한글 폰트 설정
    - 현재 유저가 사라지는 문제 해결(이 문제는 App이 mounted 될 때 fetch current user를 하므로써 해결할 수 있었다.)
    - movie detail에서 backdrop이미지 표시 구현 및 삭제(movie detail 컴포넌트가 아닌 전체 app 컴포넌트에서 배경화면을 설정하기 위해 store에 backdrop path를 이용했으며, 처음에 script의 변수 값들을 어떻게 CSS에서 사용할 수 있는지 몰라 시간이 꽤 많이 소모되었다.)
  - 동환
    - null값이 들어오면 안되는 데이터들 다 필터링하는 코드
    - db null값 있으면 안되는 데이터들 제거하기

